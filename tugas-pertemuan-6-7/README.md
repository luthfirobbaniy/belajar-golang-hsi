## How To Play

Run this app using `go run main.go`

Go to `http://localhost:3000/swagger/index.html` to access Swagger

Read [Testing Instruction](#testing-instruction) and [Tests List](#tests-list) for more information about testing

## Endpoints

### Authentication Endpoints

- [X] `POST /api/auth/login` - Login user
- [X] `POST /api/auth/register` - Register new user (optional)

### Student Management Endpoints (Protected)

- [X] `GET /api/students` - Get all students data
- [X] `GET /api/students/:id` - Get student data by ID
- [X] `POST /api/students` - Create new student data
- [X] `PUT /api/students/:id` - Update student data
- [X] `DELETE /api/students/:id` - Delete student

### Profile Endpoint (Protected)

- [X] `GET /api/profile` - Get logged in user's profile

## App Architecture

### Unprotected (No JWT)
```
Request --- [ Logger, CORS, Recover ] --- Service
                -----------------
                Global Middleware
```

### Protected (Need JWT)
```
Request --- [ Logger, CORS, Recover ] --- [ Auth Middleware ] --- Service
                -----------------           ----------------
                Global Middleware           Route Middleware
```

## File Structure

```
tugas-pertemuan-7/
├── .env (optional)
├── coverage.html
├── coverage.out
├── go.mod
├── go.sum
├── main.go
├── README.md
├── swagger-screenshot.png
├── TESTING_REPORT.md
├── docs/
│   ├── docs.go (generated by swaggo)
│   ├── swagger.json
│   └── swagger.yaml
├── handlers/
│   ├── auth_test.go
│   ├── auth.go
│   ├── profile.go
│   ├── student_test.go
│   └──  student.go
├── middleware/
│   ├── jwt_test.go
│   ├── jwt.go
│   └── logger.go
├── models/
│   ├── request.go
│   ├── response.go
│   ├── student_test.go
│   ├── student.go
│   └── user.go
├── tests/
│   ├── benchmarks
│   │   └── handler_benchmark_test.go
│   ├── integration
│   │   └── auth_integration_test.go
│   │   └── student_integration_test.go
│   └── main.go
└── utils/
    └── jwt_test.go
    └── jwt.go
    └── validation_test.go
    └── validation.go
```

## Testing Instruction

```
go test ./...                          # Run all tests
go test -v ./...                       # Run all tests (with verbose output)
go test -cover ./...                   # Run all tests (with coverage)

go test -bench=. ./tests/benchmarks/   # Run benchmarks

go test -coverprofile=coverage.out ./...           # Generate coverage.out
go tool cover -html=coverage.out -o coverage.html  # Generate coverage.html
```

## Tests List

### Unit Tests (wajib minimal 6 dari 8):

- [X]  TestGenerateToken
- [X]  TestValidateToken
- [X]  TestInvalidToken
- [X]  TestValidateEmail (table-driven)
- [X]  TestValidateNIM
- [X]  TestValidateSemester
- [ ]  TestStudentValidation
- [ ]  TestUserAuthentication

### Integration Tests (wajib minimal 4 dari 6):

- [X]  TestLoginSuccess
- [X]  TestLoginFailed
- [X]  TestGetAllStudents
- [X]  TestGetStudentByID
- [X]  TestCreateStudent
- [x]  TestUpdateStudent

### Benchmarks (wajib minimal 1 dari 2):

- [X]  BenchmarkGetStudents
- [X]  BenchmarkGenerateToken

## Testing Report

[Click here!](./TESTING_REPORT.md)

## Swagger Screenshot
![Swagger](./swagger-screenshot.png)
